<div class="row">
  <div class="col-md-10">
        <% if@recipe.errors.any? %>
        <h2>The following errors prevented the recipe from getting created</h2>
        <ul>
            <% @recipe.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
            <% end %>
        </ul>
        <% end %>
        
      <%= simple_form_for @recipe, defaults: {input_html: {multipart: true, class:'form-horizontal'}}  do |f| %>
        <%= f.input :title, label: 'Recipe Name', input_html: {class: 'form-control'} %>
        <%= f.file_field :image, accept: 'image/jpeg,image/gif,image/png', input_html: {class: 'form-control'} %>
        <%= f.input :description, input_html: {rows:'3', class: 'form-control'} %>
        <div class="col-md-3 no-padding">
          <%= f.input :serving_number, input_html: {class: 'form-control', min: 0, value: f.object.serving_number || '1'} %></div>
        <div class="col-md-3 no-padding left-padding">
          <%= f.input :rate_per_hour, input_html: {class: 'form-control', min: 0} %></div>
        <div class="col-md-3 no-padding left-padding">
          <%= f.input :time_spent_in_hour, input_html: {class: 'form-control', min: 0} %></div>
        <div class="col-md-3 no-padding left-padding">
          <%= f.input :percentage_profit, input_html: {class: 'form-control', min: 0}, label: 'Optional percentage profit to add' %>
        </div>
        <br><br><br>
        <div class="container">
          <ul class="nav nav-pills nav-justified">
            <li class="active"><a href="#Ingredient" data-toggle="tab">Ingredients</a></li>
            <li><a href="#Material" data-toggle="tab">Non-food items</a></li>
          </ul>
          
          <div class="tab-content">
            <div class="tab-pane fade in active" id="Ingredient">
                <h2><strong>Ingredients</strong></h2>
                <table class="table">
                  <thead>
                    
                  </thead>
                  <tbody id="recipe_ingredients">
                    <%= f.simple_fields_for :recipe_ingredients, defaults: {input_html: {class:'form-inline'}} do |recipe_ingredient| %>
                      <%= render 'recipe_ingredient_fields', :f => recipe_ingredient %>
                    <% end %>
                    <%#= link_to_add_association 'Add an Ingredient',f, :recipe_ingredients, :"data-association-insertion-node" => "tbody#recipe_ingredients", :"data-association-insertion-method" => "append", :partial => "recipe_ingredient_fields", :class => "btn btn-default" %>
                  </tbody>
                  
                </table>
                <%= link_to_add_association 'Add an Ingredient',f, :recipe_ingredients, :"data-association-insertion-node" => "tbody#recipe_ingredients", :"data-association-insertion-method" => "append", :partial => "recipe_ingredient_fields", :class => "btn btn-default" %>
                    
            </div>
            <div class="tab-pane fade in" id="Material">
                <h2><strong>Non-food items</strong></h2>
                <table class="table">
                  <thead>
                  </thead>
                  <tbody id="recipe_materials">
                    <%= f.simple_fields_for :recipe_materials, defaults: {input_html: {class:'form-inline'}} do |recipe_material| %>
                      <%= render 'recipe_material_fields', :f => recipe_material %>
                    <% end %>
                    <%#= link_to_add_association 'Add an Ingredient',f, :recipe_ingredients, :"data-association-insertion-node" => "tbody#recipe_ingredients", :"data-association-insertion-method" => "append", :partial => "recipe_ingredient_fields", :class => "btn btn-default" %>
                  </tbody>
                  
                </table>
                <%= link_to_add_association 'Add Material',f, :recipe_materials, :"data-association-insertion-node" => "tbody#recipe_materials", :"data-association-insertion-method" => "append", :partial => "recipe_material_fields", :class => "btn btn-default" %>
              
            </div>
          </div>
        </div>
        
        <br>
          <%= f.button :submit, :disable_with => 'Please wait ...', :class => 'btn-primary btn-lg' %>
          <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                      recipes_path, :class => 'btn btn-default btn-lg' %>
        
      <% end %>
   </div>
 </div>
   
 <script type="text/javascript">
    $('#recipe_image').bind('change', function() {
      var size_in_megabytes = this.files[0].size/1024/1024;
      if (size_in_megabytes > 5){
        alert('Maximum file size is 5MB. ');
      }
    });
  </script>
  